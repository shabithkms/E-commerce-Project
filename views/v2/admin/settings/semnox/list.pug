extends ../../layouts/master.pug

block csslib
	link(href='/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')
	link(href='/admin/assets/plugins/global/plugins.bundle.css' rel='stylesheet' type='text/css')
	link(href='/admin/assets/css/style.bundle.css' rel='stylesheet' type='text/css')

block jslib
	// begin::Vendors Javascript(used by this page)
	script(src='/admin/assets/plugins/custom/datatables/datatables.bundle.js')
	script(src='/admin/assets/plugins/custom/formrepeater/formrepeater.bundle.js')
	// end::Vendors Javascript
	// begin::Custom Javascript(used by this page)
	script(src='/admin/assets/js/custom/apps/ecommerce/catalog/save-category.js')
	script(src='/admin/assets/js/widgets.bundle.js')
	script(src='/admin/assets/js/custom/widgets.js')
	script(src='/admin/assets/js/custom/apps/chat/chat.js')
	script(src='/admin/assets/js/custom/utilities/modals/upgrade-plan.js')
	script(src='/admin/assets/js/custom/utilities/modals/create-app.js')
	script(src='/admin/assets/js/custom/utilities/modals/users-search.js')

	// Form Submission Script
	script(src='/common/js/form-data-json.min.js')
	script(src='/common/js/es-form.js')

block customScript 
	script.
		function enableForm(){
			document.getElementById('semnox_base_url').disabled = false
			document.getElementById('semnox_login_id').disabled = false
			document.getElementById('semnox_password').disabled = false
			document.getElementById('semnox_site_id').disabled = false
			document.getElementById('semnox_machine_name').disabled = false
			//- document.getElementById('semnox_package_group_id').disabled = false
			//- document.getElementById('semnox_free_product_group_id').disabled = false
			//- document.getElementById('semnox_var_coupon_id').disabled = false
			//- document.getElementById('semnox_has_toy_promo').disabled = false
			//- document.getElementById('semnox_toy_promo_value').disabled = false
			document.getElementById('semnox_payment_mode').disabled = false
			document.querySelectorAll('input[name=semnox_free_toy_available]').forEach((item) =>{
				item.disabled = false
			})
			document.querySelector('input[name=semnox_free_toy_threshold]').disabled = false
			document.getElementById('edit-btn').classList.add('d-none')
			document.getElementById('save-btn').classList.remove('d-none')
			document.getElementById('cancel-btn').classList.remove('d-none')
		}
		function disableForm(){
			document.getElementById('semnox_base_url').disabled = true
			document.getElementById('semnox_login_id').disabled = true
			document.getElementById('semnox_password').disabled = true
			document.getElementById('semnox_site_id').disabled = true
			document.getElementById('semnox_machine_name').disabled = true
			//- document.getElementById('semnox_package_group_id').disabled = true
			//- document.getElementById('semnox_free_product_group_id').disabled = true
			//- document.getElementById('semnox_var_coupon_id').disabled = true
			//- document.getElementById('semnox_has_toy_promo').disabled = true
			//- document.getElementById('semnox_toy_promo_value').disabled = true
			document.getElementById('semnox_payment_mode').disabled = true
			document.querySelectorAll('input[name=semnox_free_toy_available]').forEach((item) =>{
				item.disabled = true
			})
			document.querySelector('input[name=semnox_free_toy_threshold]').disabled = true
			document.getElementById('edit-btn').classList.remove('d-none')
			document.getElementById('save-btn').classList.add('d-none')
			document.getElementById('cancel-btn').classList.add('d-none')
			document.querySelectorAll(".fv-plugins-message-container").forEach((el)=>{
				el.classList.add('d-none')
			})
			document.querySelectorAll(".form-control").forEach((el)=>{
				el.classList.remove('is-invalid')
			})
		}


block content
	.d-flex.flex-column.flex-column-fluid
		#kt_app_toolbar.app-toolbar.py-3.py-lg-6
			#kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
				.page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
					h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0
						| Semnox Settings
					ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
						li.breadcrumb-item.text-muted
							a.text-muted.text-hover-primary(href='/admin/dashboard') Home
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted Settings
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted Semnox

		#kt_app_content.app-content.flex-column-fluid
			#kt_app_content_container.app-container.container-xxl

				- var alertTitle = 'BE CAUTIOUS - SEMNOX ALERT'
				- var alertBody = 'Any changes here will effect the ecommerce part of the store.'
				include ../../partials/_dismissable-alert

				form#kt_subscriptions_create_new.form.es-form.d-flex.flex-column.flex-lg-row(action=`/admin/settings/integrations/semnox/save` data-kt-redirect-url=`/admin/settings/integrations/semnox`  method='post')
					.d-flex.flex-column.flex-row-fluid.gap-7.gap-lg-10
						.card.card-flush.py-4
							.card-header
								.card-title
									h2.fw-bold Semnox
								.card-toolbar
									button.btn.btn-sm.me-2.btn-danger.d-none(type="button" id="cancel-btn" onClick='disableForm()')
										span.label Cancel
									button.btn.btn-sm.btn-success.form-submit-btn.d-none(id="save-btn" type='submit')
										span.label Save
										span.preloader.d-none Saving...
									button.btn.btn-sm.btn-success(type="button" id="edit-btn" onClick='enableForm()')
										span.label Edit
							.card-body.pt-0.row.mb-10
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Semnox Base URL
									input.form-control.disabled(type='text' id='semnox_base_url'   name=`semnox_base_url` value=data.semnox_base_url  disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_base_url`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Semnox Login ID
									input.form-control.disabled(type='text' id='semnox_login_id'   name=`semnox_login_id` value=data.semnox_login_id   disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_login_id`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Semnox Password
									input.form-control.disabled(type='text' id='semnox_password'   name=`semnox_password` value=data.semnox_password  disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_password`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Semnox Site ID
									input.form-control.disabled(type='text' id='semnox_site_id'  name=`semnox_site_id` value=data.semnox_site_id  disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_site_id`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Semnox Machine Name
									input.form-control.disabled(type='text' id='semnox_machine_name'  name=`semnox_machine_name` value=data.semnox_machine_name  disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_machine_name`)
								//- .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
								//- 	label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
								//- 		span  Semnox Package Group ID
								//- 	input.form-control.disabled(type='text' id='semnox_package_group_id'   name=`semnox_package_group_id` value=data.semnox_package_group_id  disabled)
								//- 	.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_package_group_id`)
								//- .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
								//- 	label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
								//- 		span  Semnox Free Product Group ID
								//- 	input.form-control.disabled(type='text' id='semnox_free_product_group_id' name=`semnox_free_product_group_id` value=data.semnox_free_product_group_id  disabled)
								//- 	.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_free_product_group_id`)
								//- .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
								//- 	label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
								//- 		span  Semnox Variable coupon ID
								//- 	input.form-control.disabled(type='text' id='semnox_var_coupon_id' name=`semnox_var_coupon_id` value=data.semnox_var_coupon_id  disabled)
								//- 	.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_var_coupon_id`)
								//- .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
								//- 	label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
								//- 		span  Has toy promo
								//- 	//- input.form-control.disabled(type='text' id='semnox_has_toy_promo' name=`semnox_has_toy_promo` value=data.semnox_has_toy_promo  disabled)
								//- 	select.form-select(data-control='select2' id='semnox_has_toy_promo' name=`semnox_has_toy_promo` data-hide-search='true' data-placeholder='Select status' disabled)
								//- 		option
								//- 		option(value='true' selected=data.semnox_has_toy_promo==true) Yes
								//- 		option(value='false' selected=!data.semnox_has_toy_promo==true) No
								//- 	.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_has_toy_promo`)
								//- .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
								//- 	label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
								//- 		span  Toy promo value
								//- 	input.form-control.disabled(type='number' id='semnox_toy_promo_value' name=`semnox_toy_promo_value` value=data.semnox_toy_promo_value  disabled)
								//- 	.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_toy_promo_value`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  Semnox Payment Mode ID
									input.form-control.disabled(type='text' id='semnox_payment_mode' name=`semnox_payment_mode` value=data.semnox_payment_mode  disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_payment_mode`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span.required Free Toy Threshold
									input.form-control(type='text' placeholder='Cart Amount' id='semnox_free_toy_threshold'  name=`semnox_free_toy_threshold` value=`${data.semnox_free_toy_threshold || "0"}` disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_free_toy_threshold`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span.required  Free Toy Available
									.row
										.col.d-flex.text-start.p-6
											span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
												input.form-check-input(type='radio' id="regular" name='semnox_free_toy_available' value='false' disabled checked=!data.semnox_semnox_free_toy_available)
											span.ms-5
												label.form-label(for="regular") No
										.col.d-flex.text-start.p-6
											span.form-check.form-check-custom.form-check-solid.form-check-sm.align-items-start(data-kt-button='true')
												input.form-check-input(type='radio' name='semnox_free_toy_available' id="free_product" value='true' disabled checked=data.semnox_free_toy_available)
											span.ms-5
												label.form-label(for="free_product") Yes
									.fv-plugins-message-container.invalid-feedback(id=`field-error-semnox_free_toy_available`)
								
extends ../../layouts/master.pug

block csslib
    link(href='/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')
    link(href='/admin/assets/plugins/custom/jstree/jstree.bundle.css' rel='stylesheet' type='text/css')

block jslib
    // begin::Vendors Javascript(used by this page)
    script(src='/admin/assets/plugins/custom/datatables/datatables.bundle.js')
    // end::Vendors Javascript
    // begin::Custom Javascript(used by this page)
    script(src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js')
    script(src='https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.js')
    script(src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js")
    script(src='/admin/assets/js/custom/apps/notification/catalog/products.js')
    script(src='/admin/assets/js/widgets.bundle.js')
    script(src='/admin/assets/js/custom/widgets.js')
    script(src='/admin/assets/js/custom/apps/chat/chat.js')
    script(src='/admin/assets/js/custom/utilities/modals/upgrade-plan.js')
    script(src='/admin/assets/js/custom/utilities/modals/create-app.js')
    script(src='/admin/assets/js/custom/utilities/modals/users-search.js')
    script(src='/admin/assets/plugins/custom/jstree/jstree.bundle.js')

    // CKEditor Build Bundles
    script(src='/admin/assets/plugins/custom/ckeditor/ckeditor-classic.bundle.js')

    // Form Submission Script
    script(src='/common/js/form-data-json.min.js')
    script(src='/common/js/es-form.js')

block customScript
    script.
        document.querySelectorAll('.content_wysiwyg').forEach(function(e) {
            ClassicEditor
            .create(document.querySelector(`#${e.getAttribute('id')}`))
            .then(editor => {
            })
            .catch(error => {
            console.error(error);
            });
        })

block content
    .d-flex.flex-column.flex-column-fluid
        #kt_app_toolbar.app-toolbar.py-3.py-lg-6
            #kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
                .page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
                    h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0
                        | Notification Settings
                    ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
                        li.breadcrumb-item.text-muted
                            a.text-muted.text-hover-primary(href='/admin/dashboard') Home
                        li.breadcrumb-item
                            span.bullet.bg-gray-400.w-5px.h-2px
                        li.breadcrumb-item.text-muted Settings
                        li.breadcrumb-item
                            span.bullet.bg-gray-400.w-5px.h-2px
                        li.breadcrumb-item.text-muted 
                            a.text-muted.text-hover-primary(href='/admin/settings/notification') Notification
                //- .d-flex.align-items-center.gap-2.gap-lg-3
                    a.btn.btn-sm.fw-bold.btn-primary(href='#' data-bs-toggle='modal' data-bs-target='#kt_modal_create_app') Add New
        #kt_app_content.app-content.flex-column-fluid
            #kt_app_content_container.app-container.container-xxl
                form#kt_subscriptions_create_new.form.es-form.d-flex.flex-column.flex-lg-row(action=`/admin/settings/notification/save` data-kt-redirect-url=`/admin/settings/notification/`  method='post')
                    input(type="text" name='type' value=`${type}` hidden)
                    .d-flex.flex-column.flex-row-fluid.gap-7.gap-lg-10
                        .card.card-flush.py-4
                            .card-header
                                .card-title
                                    h2.fw-bold Edit #{title} Settings
                                .card-toolbar
                                    button.btn.btn-sm.btn-success.form-submit-btn(type='submit')
                                        span.label Save
                                        span.preloader.d-none Saving...
                            .card-body.pt-0
                                if(type=='sms')
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  Sender ID
                                        input.form-control(type='text' placeholder='Sender ID'  name=`sender_id` value=`${data.sms.sender_id || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-sender_id`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required Username
                                        input.form-control(type='text' placeholder='Username'  name=`username` value=`${data.sms.username || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-username`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required Password
                                        input.form-control(type='text' placeholder='Password'  name=`password` value=`${data.sms.password || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-password`)
                                else if(type=='communication_channels')
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  Email
                                        input.form-control(type='text' placeholder='Branch Email'  name=`email` value=`${data.communication_channels.email || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-email`)
                                else if(type=='mailgun')
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  From Mail address
                                        input.form-control(type='text' placeholder='From Mail'  name=`from` value=`${data.mailgun.from || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-from`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  Domain
                                        input.form-control(type='text' placeholder='Domain'  name=`domain` value=`${data.mailgun.domain || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-domain`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  API Key
                                        input.form-control(type='text' placeholder='API Key'  name=`api_key` value=`${data.mailgun.api_key || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-api_key`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  OTP Template
                                        input.form-control(type='text' placeholder='OTP Template'  name=`otp_template` value=`${data.mailgun.otp_template || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-otp_template`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required Forgot Password Template
                                        input.form-control(type='text' placeholder='Forgot Password Template'  name=`forgot_password_template` value=`${data.mailgun.forgot_password_template || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-forgot_password_template`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required Forgot Password Thankyou Template
                                        input.form-control(type='text' placeholder='Forgot Password Thankyou Template'  name=`forgot_password_thankyou_template` value=`${data.mailgun.forgot_password_thankyou_template || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-forgot_password_thankyou_template`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required Order complete Template
                                        input.form-control(type='text' placeholder='Order complete Template'  name=`order_complete_template` value=`${data.mailgun.order_complete_template || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-order_complete_template`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required Welcome Template
                                        input.form-control(type='text' placeholder='Welcome Template'  name=`welcome_template` value=`${data.mailgun.welcome_template || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-welcome_template`)
                                    

                                    





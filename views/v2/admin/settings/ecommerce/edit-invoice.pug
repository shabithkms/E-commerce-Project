extends ../../layouts/master.pug

block csslib
    link(href='/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')
    link(href='/admin/assets/plugins/custom/jstree/jstree.bundle.css' rel='stylesheet' type='text/css')

block jslib
    // begin::Vendors Javascript(used by this page)
    script(src='/admin/assets/plugins/custom/datatables/datatables.bundle.js')
    // end::Vendors Javascript
    // begin::Custom Javascript(used by this page)
    script(src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js')
    script(src='https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.js')
    script(src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js")
    script(src='/admin/assets/js/custom/apps/ecommerce/catalog/products.js')
    script(src='/admin/assets/js/widgets.bundle.js')
    script(src='/admin/assets/js/custom/widgets.js')
    script(src='/admin/assets/js/custom/apps/chat/chat.js')
    script(src='/admin/assets/js/custom/utilities/modals/upgrade-plan.js')
    script(src='/admin/assets/js/custom/utilities/modals/create-app.js')
    script(src='/admin/assets/js/custom/utilities/modals/users-search.js')
    script(src='/admin/assets/plugins/custom/jstree/jstree.bundle.js')

    // CKEditor Build Bundles
    script(src='/admin/assets/plugins/custom/ckeditor/ckeditor-classic.bundle.js')

    // Form Submission Script
    script(src='/common/js/form-data-json.min.js')
    script(src='/common/js/es-form.js')

block customScript
    script.
        document.querySelectorAll('.content_wysiwyg').forEach(function(e) {
            ClassicEditor
            .create(document.querySelector(`#${e.getAttribute('id')}`))
            .then(editor => {
            })
            .catch(error => {
            console.error(error);
            });
        })

block content
    .d-flex.flex-column.flex-column-fluid
        #kt_app_toolbar.app-toolbar.py-3.py-lg-6
            #kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
                .page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
                    h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0
                        | Ecommerce Settings
                    ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
                        li.breadcrumb-item.text-muted
                            a.text-muted.text-hover-primary(href='/admin/dashboard') Home
                        li.breadcrumb-item
                            span.bullet.bg-gray-400.w-5px.h-2px
                        li.breadcrumb-item.text-muted Settings
                        li.breadcrumb-item
                            span.bullet.bg-gray-400.w-5px.h-2px
                        li.breadcrumb-item.text-muted 
                            a.text-muted.text-hover-primary(href='/admin/settings/ecommerce') Ecommerce
                //- .d-flex.align-items-center.gap-2.gap-lg-3
                    a.btn.btn-sm.fw-bold.btn-primary(href='#' data-bs-toggle='modal' data-bs-target='#kt_modal_create_app') Add New
        #kt_app_content.app-content.flex-column-fluid
            #kt_app_content_container.app-container.container-xxl
                form#kt_subscriptions_create_new.form.es-form.d-flex.flex-column.flex-lg-row(action=`/admin/settings/ecommerce/invoice/save` data-kt-redirect-url=`/admin/settings/ecommerce/`  method='post')
                    .d-flex.flex-column.flex-row-fluid.gap-7.gap-lg-10
                        .card.card-flush.py-4
                            .card-header
                                .card-title
                                    h2.fw-bold Edit Ecommerce Settings
                                .card-toolbar
                                    button.btn.btn-sm.btn-success.form-submit-btn(type='submit')
                                        span.label Save
                                        span.preloader.d-none Saving...
                            .card-body.pt-0
                                ul.nav.nav-tabs.nav-line-tabs.mb-5.fs-6
                                    each brandLanguage, i in authAdmin.selected_brand.languages
                                        li.nav-item
                                            a.nav-link(class= (i== 0 ? 'active' : '') data-bs-toggle='tab' href=`#kt_tab_pane_${brandLanguage.prefix}`) #{brandLanguage.name}
                                #myTabContent.tab-content.tab-content-fields
                                    each brandLanguage, i in authAdmin.selected_brand.languages
                                        .tab-pane.fade(class= (i== 0 ? 'active show' : '') role='tabpanel' id=`kt_tab_pane_${brandLanguage.prefix}`)
                                            .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container
                                                label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                                    span.required Invoice Address (#{brandLanguage.prefix})
                                                textarea.content_wysiwyg(name=`invoice_address[${brandLanguage.prefix}]` id=`address-${brandLanguage.prefix}-${i}`) !{data.invoice_address && data.invoice_address[brandLanguage.prefix]}
                                                .fv-plugins-message-container.invalid-feedback(id=`field-error-invoice_address_${brandLanguage.prefix}`)
                                            .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container
                                                label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                                    span.required Terms and Conditions (#{brandLanguage.prefix})
                                                textarea.content_wysiwyg(name=`terms_and_conditions[${brandLanguage.prefix}]` id=`terms-${brandLanguage.prefix}-${i}`) !{data.terms_and_conditions && data.terms_and_conditions[brandLanguage.prefix]}
                                                .fv-plugins-message-container.invalid-feedback(id=`field-error-terms_and_conditions_${brandLanguage.prefix}`)
                                            .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container
                                                label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                                    span.required Footer Text (#{brandLanguage.prefix})
                                                textarea.content_wysiwyg(name=`footer_text[${brandLanguage.prefix}]` id=`footer-${brandLanguage.prefix}-${i}`) !{data.footer_text && data.footer_text[brandLanguage.prefix]}
                                                .fv-plugins-message-container.invalid-feedback(id=`field-error-footer_text_${brandLanguage.prefix}`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  Frontend URL
                                        input.form-control(type='text' placeholder='Frontend URL'  name=`frontend_url` value=`${data.frontend_url || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-frontend_url`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  TRN Number
                                        input.form-control(type='text' placeholder='TRN Number'  name=`trn_number` value=`${data.trn_number || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-trn_number`)
                                    .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6                                        
                                        label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                            span.required  VAT Percentage
                                        input.form-control(type='text' placeholder='VAT %'  name=`vat_percentage` value=`${data.vat_percentage || ""}`)
                                        .fv-plugins-message-container.invalid-feedback(id=`field-error-vat_percentage`)
                                    





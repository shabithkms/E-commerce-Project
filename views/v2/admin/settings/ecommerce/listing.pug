extends ../../layouts/master.pug

block csslib
	link(href='/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')
	link(href='/admin/assets/plugins/custom/jstree/jstree.bundle.css' rel='stylesheet' type='text/css')

block jslib
	// begin::Vendors Javascript(used by this page)
	script(src='/admin/assets/plugins/custom/datatables/datatables.bundle.js')
	// end::Vendors Javascript
	// begin::Custom Javascript(used by this page)
	script(src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js')
	script(src='https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.js')
	script(src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js")
	script(src='/admin/assets/js/custom/apps/ecommerce/catalog/products.js')
	script(src='/admin/assets/js/widgets.bundle.js')
	script(src='/admin/assets/js/custom/widgets.js')
	script(src='/admin/assets/js/custom/apps/chat/chat.js')
	script(src='/admin/assets/js/custom/utilities/modals/upgrade-plan.js')
	script(src='/admin/assets/js/custom/utilities/modals/create-app.js')
	script(src='/admin/assets/js/custom/utilities/modals/users-search.js')
	script(src='/admin/assets/plugins/custom/jstree/jstree.bundle.js')

	// Form Submission Script
	script(src='/common/js/form-data-json.min.js')
	script(src='/common/js/es-form.js')

block customScript
	script.
		function changeStatus(status,mode){
			fetch("/settings/general/brand/change-status", {
				method: 'POST',
				cache: 'no-cache',
				headers: {
					Accept: 'application/json',
					'Content-Type': 'application/json',
				},
				body: JSON.stringify({
					status,
					mode
				}),
			})
				.then(async (res) => {
					const status = res.status
					let data = await res.json()
					if (status >= 200 && status < 300) {
						location.reload()
					} else {
						Swal.fire({
							text: data.error || 'Something went wrong.',
							icon: 'warning',
							buttonsStyling: !1,
							confirmButtonText: 'Ok, got it!',
							customClass: {
								confirmButton: 'btn fw-bold btn-primary',
							},
						})
					}
				})
				.catch((err) => {
					Swal.fire({
						text: 'Something went wrong !.',
						icon: 'error',
						buttonsStyling: !1,
						confirmButtonText: 'Ok, got it!',
						customClass: {
							confirmButton: 'btn fw-bold btn-primary',
						},
					})
				})
		}
		function clearCache(){
			Swal.fire({
				text: 'Are you sure you want to clear cache ?',
				icon: 'warning',
				showCancelButton: !0,
				buttonsStyling: !1,
				confirmButtonText: 'Yes, Clear!',
				cancelButtonText: 'No, cancel',
				customClass: {
					confirmButton: 'btn fw-bold btn-danger',
					cancelButton: 'btn fw-bold btn-active-light-primary',
				},
			}).then((e) => {
				if (e.value) {
					fetch("/settings/general/clear-cache", {
						method: 'POST',
						cache: 'no-cache',
						headers: {
							Accept: 'application/json',
							'Content-Type': 'application/json',
						},
						body: JSON.stringify({

						}),
					})
						.then(async (res) => {
							const status = res.status
							let data = await res.json()
							if (status >= 200 && status < 300) {
								location.reload()
							} else {
								Swal.fire({
									text: data.error || 'Something went wrong.',
									icon: 'warning',
									buttonsStyling: !1,
									confirmButtonText: 'Ok, got it!',
									customClass: {
										confirmButton: 'btn fw-bold btn-primary',
									},
								})
							}
						})
						.catch((err) => {
							Swal.fire({
								text: 'Something went wrong !.',
								icon: 'error',
								buttonsStyling: !1,
								confirmButtonText: 'Ok, got it!',
								customClass: {
									confirmButton: 'btn fw-bold btn-primary',
								},
							})
						})
				}
			})
		}

block content
	.d-flex.flex-column.flex-column-fluid
		#kt_app_toolbar.app-toolbar.py-3.py-lg-6
			#kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
				.page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
					h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0
						| Ecommerce Settings
					ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
						li.breadcrumb-item.text-muted
							a.text-muted.text-hover-primary(href='/admin/dashboard') Home
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted Settings
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted Ecommerce
				//- .d-flex.align-items-center.gap-2.gap-lg-3
					a.btn.btn-sm.fw-bold.btn-primary(href='#' data-bs-toggle='modal' data-bs-target='#kt_modal_create_app') Add New

		#kt_app_content.app-content.flex-column-fluid
			#kt_app_content_container.app-container.container
				.row.g-5.g-xl-10.mb-xl-10
					.col-lg-12
						.card.mb-5.pb-4
							.card-header
								h3.card-title Ecommerce Settings
								.card-toolbar 
									a.btn.btn-sm.btn-primary(href=`/admin/settings/ecommerce/invoice/edit`) Edit
							.card-body
								ul.nav.nav-tabs.nav-line-tabs.mb-5.fs-6
									each brandLanguage, i in authAdmin.selected_brand.languages
										li.nav-item
											a.nav-link(class= (i== 0 ? 'active' : '') data-bs-toggle='tab' href=`#kt_tab_pane_${brandLanguage.prefix}`) #{brandLanguage.name}
								#myTabContent.tab-content.tab-content-fields
									each brandLanguage, i in authAdmin.selected_brand.languages
										.tab-pane.fade(class= (i== 0 ? 'active show' : '') role='tabpanel' id=`kt_tab_pane_${brandLanguage.prefix}`)
											h5 Invoice Address 
											if(data.invoice_address && data.invoice_address[brandLanguage.prefix])
												.text-gray-500.fw-semibold.fs-5.mb-5 !{data.invoice_address[brandLanguage.prefix] || "Nil"}
											else 
												.text-gray-500.fw-semibold.fs-5.mb-5 Nil
											h5 Terms and Conditions
											if(data.terms_and_conditions && data.terms_and_conditions[brandLanguage.prefix])
												.text-gray-500.fw-semibold.fs-5.mb-5 !{data.terms_and_conditions[brandLanguage.prefix] || "Nil"}
											else 
												.text-gray-500.fw-semibold.fs-5.mb-5 Nil
											h5 Footer Text
											if(data.invoice_address && data.invoice_address[brandLanguage.prefix])
												.text-gray-500.fw-semibold.fs-5.mb-5 !{data.footer_text[brandLanguage.prefix] || "Nil"}
											else 
												.text-gray-500.fw-semibold.fs-5.mb-5 Nil
								h5 Frontend URL
								.text-gray-500.fw-semibold.fs-5.mb-5 !{data.frontend_url || "Nil"}
								h5 TRN Number
								.text-gray-500.fw-semibold.fs-5.mb-5 !{data.trn_number || "Nil"}
								h5 Vat Percentage
								.text-gray-500.fw-semibold.fs-5.mb-5 !{data.vat_percentage || "Nil"}








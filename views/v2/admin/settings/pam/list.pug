extends ../../layouts/master.pug

block csslib
	link(href='/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')
	link(href='/admin/assets/plugins/global/plugins.bundle.css' rel='stylesheet' type='text/css')
	link(href='/admin/assets/css/style.bundle.css' rel='stylesheet' type='text/css')

block jslib
	// begin::Vendors Javascript(used by this page)
	script(src='/admin/assets/plugins/custom/datatables/datatables.bundle.js')
	script(src='/admin/assets/plugins/custom/formrepeater/formrepeater.bundle.js')
	// end::Vendors Javascript
	// begin::Custom Javascript(used by this page)
	script(src='/admin/assets/js/custom/apps/ecommerce/catalog/save-category.js')
	script(src='/admin/assets/js/widgets.bundle.js')
	script(src='/admin/assets/js/custom/widgets.js')
	script(src='/admin/assets/js/custom/apps/chat/chat.js')
	script(src='/admin/assets/js/custom/utilities/modals/upgrade-plan.js')
	script(src='/admin/assets/js/custom/utilities/modals/create-app.js')
	script(src='/admin/assets/js/custom/utilities/modals/users-search.js')

	// Form Submission Script
	script(src='/common/js/form-data-json.min.js')
	script(src='/common/js/es-form.js')

block customScript 
	script.
		function enableForm(){
			let editables = document.getElementsByClassName('editable');

			for (let i = 0; i < editables.length; i++) {
				editables[i].disabled = false;
			}
			//- document.getElementById('pam_base_url').disabled = false
			document.getElementById('edit-btn').classList.add('d-none')
			document.getElementById('save-btn').classList.remove('d-none')
			document.getElementById('cancel-btn').classList.remove('d-none')
		}
		function disableForm(){
			let editables = document.getElementsByClassName('editable');

			for (let i = 0; i < editables.length; i++) {
				editables[i].disabled = true;
			}
			//- document.getElementById('pam_base_url').disabled = true
			document.getElementById('edit-btn').classList.remove('d-none')
			document.getElementById('save-btn').classList.add('d-none')
			document.getElementById('cancel-btn').classList.add('d-none')
			document.querySelectorAll(".fv-plugins-message-container").forEach((el)=>{
				el.classList.add('d-none')
			})
			document.querySelectorAll(".form-control").forEach((el)=>{
				el.classList.remove('is-invalid')
			})
		}


block content
	.d-flex.flex-column.flex-column-fluid
		#kt_app_toolbar.app-toolbar.py-3.py-lg-6
			#kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
				.page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
					h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0
						| PAM Settings
					ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
						li.breadcrumb-item.text-muted
							a.text-muted.text-hover-primary(href='/admin/dashboard') Home
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted Settings
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted PAM

		#kt_app_content.app-content.flex-column-fluid
			#kt_app_content_container.app-container.container-xxl

				- var alertTitle = 'BE CAUTIOUS - PAM ALERT'
				- var alertBody = 'Any changes here will effect the ecommerce part of the store.'
				include ../../partials/_dismissable-alert

				form#kt_subscriptions_create_new.form.es-form.d-flex.flex-column.flex-lg-row(action=`/admin/settings/integrations/pam/save` data-kt-redirect-url=`/admin/settings/integrations/pam`  method='post')
					.d-flex.flex-column.flex-row-fluid.gap-7.gap-lg-10
						.card.card-flush.py-4
							.card-header
								.card-title
									h2.fw-bold PAM
								.card-toolbar
									button.btn.btn-sm.me-2.btn-danger.d-none(type="button" id="cancel-btn" onClick='disableForm()')
										span.label Cancel
									button.btn.btn-sm.btn-success.form-submit-btn.d-none(id="save-btn" type='submit')
										span.label Save
										span.preloader.d-none Saving...
									button.btn.btn-sm.btn-success(type="button" id="edit-btn" onClick='enableForm()')
										span.label Edit
							.card-body.pt-0.row.mb-10
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-12
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  PAM Base URL
									span.form-control.disabled
										span=  process.env.PAM_URL
									.fv-plugins-message-container.invalid-feedback(id=`field-error-pam_base_url`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  PAM Location ID
									input.form-control.editable.disabled(type='text' id='location_id'   name=`location_id` value=data.location_id  disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-location_id`)
								.d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container.col-md-6
									label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
										span  PAM Location Zone ID
									input.form-control.editable.disabled(type='text' id='zone_id'  name=`zone_id` value=data.zone_id  disabled)
									.fv-plugins-message-container.invalid-feedback(id=`field-error-zone_id`)

extends ../../layouts/master.pug

block csslib
    link(href='/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')
    link(href='/admin/assets/plugins/custom/jstree/jstree.bundle.css' rel='stylesheet' type='text/css')

block jslib
    // begin::Vendors Javascript(used by this page)
    script(src='/admin/assets/plugins/custom/datatables/datatables.bundle.js')
    // end::Vendors Javascript
    // begin::Custom Javascript(used by this page)
    script(src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js')
    script(src='https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.js')
    script(src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js")
    script(src='/admin/assets/js/custom/apps/ecommerce/catalog/products.js')
    script(src='/admin/assets/js/widgets.bundle.js')
    script(src='/admin/assets/js/custom/widgets.js')
    script(src='/admin/assets/js/custom/apps/chat/chat.js')
    script(src='/admin/assets/js/custom/utilities/modals/upgrade-plan.js')
    script(src='/admin/assets/js/custom/utilities/modals/create-app.js')
    script(src='/admin/assets/js/custom/utilities/modals/users-search.js')
    script(src='/admin/assets/plugins/custom/jstree/jstree.bundle.js')

    // Form Submission Script
    script(src='/common/js/form-data-json.min.js')
    script(src='/common/js/es-form.js')

block customScript

block content
    .d-flex.flex-column.flex-column-fluid
        #kt_app_toolbar.app-toolbar.py-3.py-lg-6
            #kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
                .page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
                    h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0
                        | General Settings
                    ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
                        li.breadcrumb-item.text-muted
                            a.text-muted.text-hover-primary(href='/admin/dashboard') Home
                        li.breadcrumb-item
                            span.bullet.bg-gray-400.w-5px.h-2px
                        li.breadcrumb-item.text-muted Settings
                        li.breadcrumb-item
                            span.bullet.bg-gray-400.w-5px.h-2px
                        li.breadcrumb-item.text-muted 
                            a.text-muted.text-hover-primary(href='/admin/settings/general') General
                //- .d-flex.align-items-center.gap-2.gap-lg-3
                    a.btn.btn-sm.fw-bold.btn-primary(href='#' data-bs-toggle='modal' data-bs-target='#kt_modal_create_app') Add New
        #kt_app_content.app-content.flex-column-fluid
            #kt_app_content_container.app-container.container-xxl
                form#kt_subscriptions_create_new.form.es-form.d-flex.flex-column.flex-lg-row(action=`/admin/settings/general/brand/change-logo` data-kt-redirect-url=`/admin/settings/general/`  method='post')
                    .d-flex.flex-column.flex-row-fluid.gap-7.gap-lg-10
                        .card.card-flush.py-4
                            .card-header
                                .card-title
                                    h2.fw-bold Change Logo
                                .card-toolbar
                                    button.btn.btn-sm.btn-success.form-submit-btn(type='submit')
                                        span.label Save
                                        span.preloader.d-none Saving...
                            .card-body.pt-0
                                ul.nav.nav-tabs.nav-line-tabs.mb-5.fs-6
                                    each brandLanguage, i in authAdmin.selected_brand.languages
                                        li.nav-item
                                            a.nav-link(class= (i== 0 ? 'active' : '') data-bs-toggle='tab' href=`#kt_tab_pane_${brandLanguage.prefix}`) #{brandLanguage.name}
                                #myTabContent.tab-content.tab-content-fields
                                    each brandLanguage, i in authAdmin.selected_brand.languages
                                        .tab-pane.fade(class= (i== 0 ? 'active show' : '') role='tabpanel' id=`kt_tab_pane_${brandLanguage.prefix}`)
                                            .d-flex.flex-column.mb-8.fv-row.fv-plugins-icon-container
                                                .col-md-6
                                                    label.d-flex.align-items-center.fs-6.fw-semibold.mb-2
                                                        span.required  Name (#{brandLanguage.prefix})
                                                        i.fas.fa-exclamation-circle.ms-2.fs-7(data-bs-toggle='tooltip' aria-label='Specify a target name for future usage and reference' data-kt-initialized='1')
                                                    input.form-control(type='text' placeholder='Name'  name=`name[${brandLanguage.prefix}]` value=`${isBrand ? data.name[brandLanguage.prefix] : data.country.name[brandLanguage.prefix]}` disabled)
                                                    input.form-control.d-none(type='text' placeholder='Country name'  name=`id` value=`${isBrand ? data._id : data.country._id}` )
                                                    input.form-control.d-none(type='text' placeholder='Country name'  name=`is_brand` value=`${isBrand}` )
                                                    .fv-plugins-message-container.invalid-feedback(id=`field-error-name_${brandLanguage.prefix}`)
                                                style.
                                                    .image-input-placeholder {
                                                    background-image: url('/admin/assets/media/svg/files/blank-image.svg');
                                                    }
                                                    [data-theme="dark"] .image-input-placeholder {
                                                    background-image: url('/admin/assets/media/svg/files/blank-image-dark.svg');
                                                    }
                                                .mt-2
                                                    label.d-flex.align-items-center.fs-6.fw-semibold.mb-5
                                                        span.required Brand Logo (#{brandLanguage.prefix})
                                                    .image-input.image-input-empty.image-input-outline.image-input-placeholder.mb-3(data-kt-image-input='true' style='<br /> <b>Warning</b>: Undefined variable $imageBg in <b>C:\wamp64\www\keenthemes\core\html\dist\view\pages\apps\ecommerce\catalog\edit-product\_thumbnail.php</b> on line <b>30</b><br />')
                                                        if(data && data.logo && data.logo[brandLanguage.prefix] && data.logo[brandLanguage.prefix].media_url)
                                                            .image-input-wrapper.w-125px.h-125px(id=`img-preview` style=`background-image:url(${data.logo[brandLanguage.prefix].media_url}`)  
                                                        else 
                                                            .image-input-wrapper.w-150px.h-150px
                                                        label.btn.btn-icon.btn-circle.btn-active-color-primary.w-25px.h-25px.bg-body.shadow(data-kt-image-input-action='change' data-bs-toggle='tooltip' title='Change avatar')
                                                            i.bi.bi-pencil-fill.fs-7
                                                            input(type='file' name=`image.${brandLanguage.prefix}` accept='.png, .jpg, .jpeg')
                                                        span.btn.btn-icon.btn-circle.btn-active-color-primary.w-25px.h-25px.bg-body.shadow(data-kt-image-input-action='cancel' data-bs-toggle='tooltip' title='Cancel avatar')
                                                            i.bi.bi-x.fs-2
                                                        span.btn.btn-icon.btn-circle.btn-active-color-primary.w-25px.h-25px.bg-body.shadow(data-kt-image-input-action='remove' data-bs-toggle='tooltip' title='Remove avatar')
                                                            i.bi.bi-x.fs-2
                                                .fv-plugins-message-container.invalid-feedback(id=`field-error-image_${brandLanguage.prefix}`)






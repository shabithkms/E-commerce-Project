extends ../../../layouts/master.pug

block csslib
	link(href='/admin/assets/plugins/custom/datatables/datatables.bundle.css' rel='stylesheet' type='text/css')

block jslib
	// begin::Vendors Javascript(used by this page)
	script(src='/admin/assets/plugins/custom/datatables/datatables.bundle.js')
	// end::Vendors Javascript
	// begin::Custom Javascript(used by this page)
	script(src='/admin/assets/js/custom/apps/ecommerce/customers/listing/listing.js')
	script(src='/admin/assets/js/custom/apps/ecommerce/customers/listing/add.js')
	script(src='/admin/assets/js/custom/apps/ecommerce/customers/listing/export.js')
	script(src='/admin/assets/js/widgets.bundle.js')
	script(src='/admin/assets/js/custom/widgets.js')
	script(src='/admin/assets/js/custom/apps/chat/chat.js')
	script(src='/admin/assets/js/custom/utilities/modals/upgrade-plan.js')
	script(src='/admin/assets/js/custom/utilities/modals/create-app.js')
	script(src='/admin/assets/js/custom/utilities/modals/users-search.js')
	// end::Custom 

	// Form Submission Script
	script(src='/common/js/form-data-json.min.js')
	script(src='/common/js/es-form.js')

block customScript 
	script.
		//- $("#kt_daterangepicker_1").daterangepicker();
		var start = moment().subtract(29, "days");
		var end = moment();

		function cb(start, end) {
			$(".date_range_picker").html(start.format("D MMMM, YYYY") + " - " + end.format("D MMMM, YYYY"));
		}

		$(".date_range_picker").daterangepicker({
			startDate: start,
			endDate: end,
			locale: {
				format: "DD/M/Y"
			},
			ranges: {
			"Today": [moment(), moment()],
			"Yesterday": [moment().subtract(1, "days"), moment().subtract(1, "days")],
			"Last 7 Days": [moment().subtract(6, "days"), moment()],
			"Last 30 Days": [moment().subtract(29, "days"), moment()],
			"This Month": [moment().startOf("month"), moment().endOf("month")],
			"Last Month": [moment().subtract(1, "month").startOf("month"), moment().subtract(1, "month").endOf("month")]
			}
		}, cb);

		cb(start, end);

		$("input[name=user_type]").on('change', function(e) {
			if(this.value == 'specific') {
				$("#user_df").removeClass('d-none')
			}else {
				$("#user_df").addClass('d-none')
			}
		})
		$("input[name=order_type]").on('change', function(e) {
			if(this.value == 'ordered_df' || this.value == 'not_ordered_df') {
				$("#order_df").removeClass('d-none')
			}else {
				$("#order_df").addClass('d-none')
			}

			if(this.value == 'ordered_df') {
				$('#product-filtering-section').removeClass('d-none')
			} else{
				$('#product-filtering-section').addClass('d-none')
			}
		})
		$("input[name=product_filtering]").on('change', function(e) {
			if(this.value == 'specific') {
				$("#product-filtering-list").removeClass('d-none')
			}else {
				$("#product-filtering-list").addClass('d-none')
			}
		})


block content
	.d-flex.flex-column.flex-column-fluid
		#kt_app_toolbar.app-toolbar.py-3.py-lg-6
			#kt_app_toolbar_container.app-container.container-xxl.d-flex.flex-stack
				.page-title.d-flex.flex-column.justify-content-center.flex-wrap.me-3
					h1.page-heading.d-flex.text-dark.fw-bold.fs-3.flex-column.justify-content-center.my-0
						| Push Notification
					ul.breadcrumb.breadcrumb-separatorless.fw-semibold.fs-7.my-0.pt-1
						li.breadcrumb-item.text-muted
							a.text-muted.text-hover-primary(href='/admin/dashboard') Home
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted eCommerce
						li.breadcrumb-item
							span.bullet.bg-gray-400.w-5px.h-2px
						li.breadcrumb-item.text-muted Push Notification
		#kt_app_content.app-content.flex-column-fluid
			#kt_app_content_container.app-container.container-xxl
				.card
					form.form.es-form(action='/admin/ecommerce/customers/push-notification/user-filter' method="post")
						.card-header.border-0.pt-6
							.card-title
								h2 User segmentation
								//- .d-flex.align-items-center.position-relative.my-1
									span.svg-icon.svg-icon-1.position-absolute.ms-6
										svg(width='24' height='24' viewbox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg')
											rect(opacity='0.5' x='17.0365' y='15.1223' width='8.15546' height='2' rx='1' transform='rotate(45 17.0365 15.1223)' fill='currentColor')
											path(d='M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z' fill='currentColor')
									input.form-control.form-control-solid.w-250px.ps-15(type='text' data-kt-customer-table-filter='search' placeholder='Search Customers')
							.card-toolbar
								button.btn.btn-sm.btn-success.form-submit-btn(type='submit')
									span.label Save
									span.preloader.d-none Saving...
						.card-body.pb-4.mb-4
							.mb-10.fv-row.col-md-6
								label.required.form-label Name
								input.form-control.mb-2(type='text' name='campaign_name' placeholder='Campaign Name' value='')
								.fv-plugins-message-container.invalid-feedback(id=`field-error-campaign_name`)
						.card-body.pt-0
							.fv-row.mb-10.col-md-12
								label.fs-5.fw-semibold.form-label.mb-5
									| Select Device Type
								<div class="row">
									<div class="col-3">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="any" name="device" id="" checked />
										<label class="form-check-label" for="flexRadioLg">
											Small Any Device
										</label>
										</div>
									</div>
									<div class="col-3">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="ios" name="device" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small iOS
										</label>
										</div>
									</div>
									<div class="col-3">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="android" name="device" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Android
										</label>
										</div>
									</div>
								</div>
							.fv-row.mb-10.col-md-12
								label.fs-5.fw-semibold.form-label.mb-5
									| Select Language Type
								<div class="row">
									<div class="col-3">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="any" name="lang" id="" checked />
										<label class="form-check-label" for="flexRadioLg">
											Small Any 
										</label>
										</div>
									</div>
									<div class="col-3">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="en" name="lang" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small English
										</label>
										</div>
									</div>
									<div class="col-3">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="ar" name="lang" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Arabic
										</label>
										</div>
									</div>
								</div>
							.fv-row.mb-10.col-md-12
								label.fs-5.fw-semibold.form-label.mb-5
									| Select User Type
								<div class="row">
									<div class="col-3">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="all" name="user_type" id="" checked />
										<label class="form-check-label" for="flexRadioLg">
											Small All Users
										</label>
										</div>
									</div>
									<div class="col-3">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="specific" name="user_type" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Users Registered in period of
										</label>
										</div>
									</div>
								</div>
								#user_df.row.mt-5.d-none
									.col-4
										input#user_df.form-control.form-control-solid.date_range_picker(placeholder='Pick date rage' name="user_df")
							.fv-row.mb-10.col-md-12
								label.fs-5.fw-semibold.form-label.mb-5
									| Order Filtering
								<div class="row">
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="no_filter" name="order_type" id="" checked />
										<label class="form-check-label" for="flexRadioLg">
											Small No Order Filtering
										</label>
										</div>
									</div>
									//- <div class="col">
									//- 	<div class="form-check form-check-custom form-check-solid form-check-sm">
									//- 	<input class="form-check-input" type="radio" value="no_order" name="order_type" id="" />
									//- 	<label class="form-check-label" for="flexRadioLg">
									//- 		Small Without Order
									//- 	</label>
									//- 	</div>
									//- </div>
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="ordered_df" name="order_type" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Ordered In Period of
										</label>
										</div>
									</div>
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="not_ordered_df" name="order_type" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Not Ordered In Period of
										</label>
										</div>
									</div>
								</div>
								#order_df.row.mt-5.d-none
									.col-4
										input#order_df.form-control.form-control-solid.date_range_picker(placeholder='Pick date rage' name="order_df")
							.fv-row.mb-10.col-md-12
								h3.fs-5.fw-semibold.mb-5
									| Click Action
								label.fs-5.fw-semibold.form-label.mb-5
									| Action Type
								<div class="row">
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="none" name="action_type" id="" checked />
										<label class="form-check-label" for="flexRadioLg">
											Small None
										</label>
										</div>
									</div>
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="packages" name="action_type" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Packages
										</label>
										</div>
									</div>
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="promotions" name="action_type" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Promotions
										</label>
										</div>
									</div>
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="coupon" name="action_type" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Coupon
										</label>
										</div>
									</div>
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="webview" name="action_type" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Web View
										</label>
										</div>
									</div>
								</div>
								#order_df.row.mt-5
									.col-4
										input#action_item.form-control.form-control-solid(placeholder='Click Action Value' name="action_item")
							#product-filtering-section.fv-row.mb-10.col-md-12.d-none
								label.fs-5.fw-semibold.form-label.mb-5
									| Product Filtering
								<div class="row">
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="no_filter" name="product_filtering" checked id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small No Product Filtering
										</label>
										</div>
									</div>
									<div class="col">
										<div class="form-check form-check-custom form-check-solid form-check-sm">
										<input class="form-check-input" type="radio" value="specific" name="product_filtering" id="" />
										<label class="form-check-label" for="flexRadioLg">
											Small Specific Products
										</label>
										</div>
									</div>
								</div>
								<div class="row mt-5 px-5 d-none" id=product-filtering-list>
									each product in products
										<div class="col-4 p-1">
											<div class="form-check form-check-custom form-check-success form-check-solid">
												input(class="form-check-input" type="checkbox" name="filtered_products[]" value=`${product.id}` checked)
												<label class="form-check-label" for="">#{product.name.en}</label>
											</div>
										</div>
								</div>

				#kt_customers_export_modal.modal.fade(tabindex='-1' aria-hidden='true')
					.modal-dialog.modal-dialog-centered.mw-650px
						.modal-content
							.modal-header
								h2.fw-bold Export Customers
								#kt_customers_export_close.btn.btn-icon.btn-sm.btn-active-icon-primary
									span.svg-icon.svg-icon-1
										svg(width='24' height='24' viewbox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg')
											rect(opacity='0.5' x='6' y='17.3137' width='16' height='2' rx='1' transform='rotate(-45 6 17.3137)' fill='currentColor')
											rect(x='7.41422' y='6' width='16' height='2' rx='1' transform='rotate(45 7.41422 6)' fill='currentColor')
							.modal-body.scroll-y.mx-5.mx-xl-15.my-7
								form#kt_customers_export_form.form(action='#')
									.fv-row.mb-10
										label.fs-5.fw-semibold.form-label.mb-5
											| Select Export
											| Format:
										select.form-select.form-select-solid(data-control='select2' data-placeholder='Select a format' data-hide-search='true' name='format')
											option(value='excell') Excel
											option(value='pdf') PDF
											option(value='cvs') CVS
											option(value='zip') ZIP
									.fv-row.mb-10
										label.fs-5.fw-semibold.form-label.mb-5
											| Select Date
											| Range:
										input.form-control.form-control-solid(placeholder='Pick a date' name='date')
									.row.fv-row.mb-15
										label.fs-5.fw-semibold.form-label.mb-5
											| Payment
											| Type:
										.d-flex.flex-column
											label.form-check.form-check-custom.form-check-sm.form-check-solid.mb-3
												input.form-check-input(type='checkbox' value='1' checked='checked' name='payment_type')
												span.form-check-label.text-gray-600.fw-semibold All
											label.form-check.form-check-custom.form-check-sm.form-check-solid.mb-3
												input.form-check-input(type='checkbox' value='2' checked='checked' name='payment_type')
												span.form-check-label.text-gray-600.fw-semibold Visa
											label.form-check.form-check-custom.form-check-sm.form-check-solid.mb-3
												input.form-check-input(type='checkbox' value='3' name='payment_type')
												span.form-check-label.text-gray-600.fw-semibold Mastercard
											label.form-check.form-check-custom.form-check-sm.form-check-solid
												input.form-check-input(type='checkbox' value='4' name='payment_type')
												span.form-check-label.text-gray-600.fw-semibold
													| American
													| Express
									.text-center
										button#kt_customers_export_cancel.btn.btn-light.me-3(type='reset') Discard
										button#kt_customers_export_submit.btn.btn-primary(type='submit')
											span.indicator-label Submit
											span.indicator-progress
												| Please wait...
												span.spinner-border.spinner-border-sm.align-middle.ms-2





<section id="add" class="mb-5">
    <div class="half">
        

        <div class="contents order-2 order-md-1">
            <div class="container">
                <div class="row align-items-center justify-content-center">
                    <div class="col-md-12">
                        <div class="col-md-6">
                            <div class="form-block" id="pro">
                                <div class="text-center mb-5">
                                    <h3>Product <strong>Offer</strong></h3>

                                </div>
                                <form action="/admin//edit-proOffer/{{proOffer._id}}" id="productPage" method="post">
                                    <div class="form-group first">
                                        <label for="proList">Product List</label>
                                        <select name="Product" class="custom-select p-2" id="proSelect" required>
                                            <option value="{{proOffer.Product}}" selected>{{proOffer.Product}}</option>
                                            {{#each products}}
                                            <option value="{{this.name}}">{{this.name}} (Rs.{{this.price}})
                                            </option>
                                            {{/each}}
                                        </select>
                                        {{#if proErr}}
                                        <p class="text-center text-danger">{{proErr}}</p>
                                        {{/if}}
                                        <label class="pt-4">Starting Date</label>
                                        <input type="Date" class="form-control" required value="{{proOffer.Starting}}" name="Starting" id="str">
                                        <label class="pt-4">Expiry Date</label>
                                        <input type="Date" class="form-control" required name="Expiry" value="{{proOffer.Expiry}}" id="exp">
                                        <label class="pt-4">Offer Percentage</label>
                                        <input type="number" class="form-control" onkeydown="return event.keyCode !== 69" required value="{{proOffer.Offer}}" name="Offer">


                                    </div>
                                    <input type="submit" value="Edit" id="prosub" class="btn btn-block btn-primary">

                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>


</section>

<script>
    $("#proSelect").select2({
        placeholder: "Select A Product",
        allowClear: true
    });
</script>
<script>
    $(document).ready(function () {

        $('#str').blur(function () {
            let date = document.getElementById('str').value
            console.log(date)
            let today = new Date()
            var dd = today.getDate();
            var mm = today.getMonth() + 1;

            var yyyy = today.getFullYear();
            if (dd < 10) {
                dd = '0' + dd;
            }
            if (mm < 10) {
                mm = '0' + mm;
            }
            today = yyyy + '-' + mm + '-' + dd;
            console.log(today)
            if (date < today) {
                $('#prosub').hide()
                Swal.fire('Choose a valid Date')
            } else {
                $('#prosub').show()
            }
        })
        $('#exp').blur(function () {
            let date = document.getElementById('exp').value
            let strDate = document.getElementById('str').value

            console.log(date)
            let today = new Date()
            var dd = today.getDate();
            var mm = today.getMonth() + 1;

            var yyyy = today.getFullYear();
            if (dd < 10) {
                dd = '0' + dd;
            }
            if (mm < 10) {
                mm = '0' + mm;
            }
            today = yyyy + '-' + mm + '-' + dd;
            console.log(today)
            if (date < today) {
                $('#prosub').hide()
                Swal.fire('Choose a valid Date')
            } else if (strDate > date) {
                $('#prosub').hide()
                Swal.fire('Choose a valid Date')
            }
            else {
                $('#prosub').show()
            }
        })
    })
</script>